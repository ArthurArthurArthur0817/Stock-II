<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <title>Trade Nova</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="為新手打造的 AI 投資學習平台" />

  <!-- 字體 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

  <!-- 圖示 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    /* ===== Scoped 主題 ===== */
    .tn{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
      --ink:#0f172a;
      min-height:100%;
      display:flex; flex-direction:column;
      color:var(--ink);
      line-height:1.65;
    }
    .tn, .tn *{ font-family:'Noto Serif TC',serif !important; }

    /* 背景動畫（可自行換圖） */
    .tn::before{
      content:""; position:fixed; inset:0;
      background:url("https://bpic.588ku.com/video_listen/588ku_pic/21/08/09/d0e7a2b73c60fd3ef2710a74bbbaea89.jpg!/fw/800") center/cover no-repeat;
      filter:grayscale(20%) brightness(0.55);
      z-index:-2; animation:bgZoom 40s ease-in-out infinite alternate;
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.15);}}

    /* 基本排版 */
    .tn h1,.tn h2,.tn h3,.tn h4,.tn h5,.tn h6{font-weight:700;margin:0 0 .6rem;}
    .tn h1{font-size:2rem;}
    .tn p{margin:0 0 1rem;}
    .tn .container{max-width:1120px;margin:0 auto;padding:0 16px;}
    .tn .section{padding:48px 0;}

    /* Sticky Header：品牌 + 導覽；捲動時只留導覽 */
    #siteHeader{
      position:sticky; top:0; z-index:1000;
      backdrop-filter:saturate(140%) blur(8px);
      background:rgba(255,255,255,.82);
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      transition:box-shadow .25s ease;
    }
    .tn .brand{
      overflow:hidden;
      transition:max-height .35s ease, padding .35s ease, opacity .35s ease, transform .35s ease;
      will-change:max-height, padding, opacity, transform;
      padding:18px 0;
      max-height:120px;
    }
    .tn .brand-inner{ display:flex; flex-direction:column; align-items:center; }
    .tn .brand-title{ font-size:2rem; letter-spacing:.2px; }
    .tn .tagline{ margin-top:4px; opacity:.9; font-size:1rem; }

    /* ===== 導覽列（單排雙語；不足寬度時可水平捲動） ===== */
    .tn nav{ border-top:1px solid rgba(0,0,0,.06); }
    .tn .nav-wrap{
      display:flex; align-items:center; gap:8px;
      overflow:hidden; /* 預設不露出捲動條；真正捲動的是內部 .nav */
    }
    .tn .nav{
      flex:1 1 auto;
      display:flex; align-items:center; gap:8px;
      justify-content:flex-start !important;     /* 預設靠左（不足時可水平捲動） */
      overflow-x:auto; white-space:nowrap;
      scrollbar-width:none; -ms-overflow-style:none;
      scroll-behavior:smooth;
      padding-left:max(16px, env(safe-area-inset-left)) !important;
      padding-right:max(16px, env(safe-area-inset-right)) !important;
      min-height:56px; padding-top:10px; padding-bottom:10px;
    }
    .tn .nav::-webkit-scrollbar{ display:none; }

    /* Nav 連結樣式 */
    .tn .nav a,
    .tn .nav .linklike{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:2px; color:var(--ink); text-decoration:none;
      border-radius:10px; padding:.45rem .6rem;
      white-space:normal; min-width:92px;
      transition:background .15s ease, color .15s ease;
      scroll-snap-align:start;
    }
    .tn .nav a .en, .tn .nav .linklike .en{ font-weight:800; line-height:1.05; font-size:.98rem; }
    .tn .nav a .zh, .tn .nav .linklike .zh{ opacity:.9; font-size:.82rem; line-height:1.05; }
    .tn .nav a:hover, .tn .nav .linklike:hover{ color:var(--primary); background:rgba(100,153,233,.12); }
    .tn .nav a.active{ color:#fff; background:var(--primary); }

    /* 登出按鈕做成「像連結」 */
    .tn .nav form{ display:flex; align-items:stretch; margin:0; padding:0; }
    .tn .nav .linklike{ appearance:none; background:none; border:0; cursor:pointer; }

    /* 小幅縮排（compact 狀態） */
    #siteHeader.compact .brand{ max-height:0; padding:0; opacity:0; transform:translateY(-8px); }
    #siteHeader.compact .nav{ min-height:48px; padding-top:6px; padding-bottom:6px; }
    #siteHeader.compact .nav a, #siteHeader.compact .nav .linklike{ padding:.35rem .5rem; }
    #siteHeader.compact .nav .en{ font-size:.95rem; }
    #siteHeader.compact .nav .zh{ font-size:.78rem; opacity:.85; }

    /* —— 自動置中：當「內容全部放得下」時 —— */
    .tn .nav-wrap.nav-fit .nav{
      justify-content:center !important;   /* 置中 */
      overflow-x:visible;                  /* 關掉水平捲動 */
      scroll-snap-type:none;
    }
    .tn .nav-wrap.nav-fit .nav-arrow{
      display:none !important;             /* 箭頭隱藏 */
    }

    /* 箭頭按鈕（放不下時可用） */
    .tn .nav-arrow{
      flex:0 0 auto;
      width:32px; height:32px; border:0; border-radius:999px; cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.08); color:var(--ink); line-height:1; font-size:18px;
      user-select:none;
    }
    .tn .nav-arrow:hover{ background:rgba(0,0,0,.12); }
    .tn .nav-arrow:disabled{ opacity:.35; cursor:default }

    /* 內容卡片 */
    .tn .card{ background:rgba(255,255,255,.94); border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.06); }
    .tn .pad{ padding:22px 18px; }
    .tn .lead{ font-size:1.1rem; }
    .tn .btn{
      display:inline-block; padding:.65rem 1.15rem; border:1.5px solid var(--primary);
      background:transparent; color:var(--primary); border-radius:10px; text-decoration:none;
      font-weight:700; cursor:pointer; transition:transform .06s ease, background .12s ease, color .12s ease;
    }
    .tn .btn:hover{ transform:translateY(-1px); }
    .tn .btn:active{ transform:translateY(0); }
    .tn .btn-primary:hover{ background:var(--primary); color:#fff; }

    /* 服務卡 */
    .tn .grid{ display:grid; gap:18px; grid-template-columns:repeat(3, minmax(0, 1fr)); }
    @media (max-width: 992px){ .tn .grid{ grid-template-columns:repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 640px){ .tn .grid{ grid-template-columns:1fr; } }
    .tn .service{ display:block; color:inherit; text-decoration:none; border-radius:14px; overflow:hidden; background:#fff; box-shadow:0 10px 30px rgba(0,0,0,.06); transition:transform .12s ease, box-shadow .12s ease; }
    .tn .service:hover{ transform:translateY(-3px); box-shadow:0 16px 36px rgba(0,0,0,.10); }
    .tn .media{ height:180px; overflow:hidden; background:#e6eefc; }
    .tn .media img{ width:100%; height:100%; object-fit:cover; display:block; }
    .tn .body{ display:flex; align-items:center; gap:12px; padding:14px 16px; background:#0f172a; color:#fff; }
    .tn .badge{ width:46px;height:46px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:var(--primary); }
    .tn .title{ margin:0; font-size:1.05rem; }
    .tn .desc{ padding:14px 16px; background:#fff; }

    /* Footer */
    .tn footer{ background:var(--secondary); color:#fff; text-align:center; margin-top:auto; }
    .tn footer .container{ padding:28px 16px; }
    .tn footer .copyright{ border-top:1px solid rgba(255,255,255,.72); padding-top:12px; color:#ccc; font-size:.92rem; }

    /* RWD */
    @media (max-width: 720px){
      .tn .nav{ min-height:50px; padding-top:8px; padding-bottom:8px; }
      .tn .nav a, .tn .nav .linklike{ padding:.32rem .5rem; min-width:78px; }
      .tn .nav .en{ font-size:.9rem; }
      .tn .nav .zh{ font-size:.76rem; }
    }
    @media (max-width: 480px){
      .tn .nav a, .tn .nav .linklike{ padding:.3rem .46rem; min-width:74px; }
      .tn .nav .en{ font-size:.86rem; }
      .tn .nav .zh{ font-size:.72rem; }
      .tn .btn { padding:.5rem .85rem; font-size:.92rem; }
    }
  
    /* 停用 Scroll Anchoring 防止瀏覽器自行校正造成跳動 */
    html, body, #siteHeader, main { overflow-anchor: none; }
</style>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorial.css') }}">
</head>

<body class="tn">
  <header id="siteHeader">
    <div class="brand">
      <div class="brand-inner container">
        <h1 class="brand-title"><span style="color:var(--primary);">Trade</span> Nova</h1>
        <p class="tagline">結合GenAI的新手智慧投資平台</p>
      </div>
    </div>

    <nav>
      <div class="nav-wrap" id="navWrap">
        <button type="button" class="nav-arrow left" aria-label="向左" id="navLeft">‹</button>
        <div class="nav container" id="navScroller">
          <a href="{{ url_for('main') }}" class="active"><span class="en">Home</span><span class="zh">首頁</span></a>
          <a href="{{ url_for('account') }}"><span class="en">Account</span><span class="zh">AI帳戶分析師</span></a>
          <a href="{{ url_for('question_ask_api') }}"><span class="en">AI</span><span class="zh">AI問答</span></a>
          <a href="{{ url_for('risk') }}"><span class="en">Risk</span><span class="zh">風險類型分析</span></a>
          <a href="{{ url_for('roi') }}"><span class="en">ROI</span><span class="zh">投資報酬率計算</span></a>
          <a href="{{ url_for('journal') }}"><span class="en">Journal</span><span class="zh">學習歷程追蹤</span></a>
          <a href="{{ url_for('dictionary') }}"><span class="en">Dictionary</span><span class="zh">股票字典</span></a>
          <a href="{{ url_for('trading_history_rank') }}"><span class="en">Rank</span><span class="zh">排行榜</span></a>
          <a href="{{ url_for('simulation') }}"><span class="en">Simulation</span><span class="zh">股票模擬交易</span></a>
          <a href="{{ url_for('industry_select_stock') }}"><span class="en">Industry</span><span class="zh">市場情勢模擬</span></a>
          <a href="#" class="nav-tutorial" id="navTutorialLink">
            <span class="en">Tutorial</span>
            <span class="zh">網站功能介紹</span>
          </a>

          {% if session.get('user_id') %}
            <form action="{{ url_for('logout') }}" method="POST" class="d-inline">
              <button type="submit" id="authLink" class="linklike">
                <span class="en">Logout</span><span class="zh">登出</span>
              </button>
            </form>
          {% else %}
            <a href="{{ url_for('login') }}" id="authLink">
              <span class="en">Login</span><span class="zh">登入</span>
            </a>
          {% endif %}
        </div>
        <button type="button" class="nav-arrow right" aria-label="向右" id="navRight">›</button>
      </div>
    </nav>
  </header>

  <main>
    <!-- About -->
    <section class="section">
      <div class="container">
        <article class="card pad">
          <h5 style="color:var(--primary);margin-bottom:6px;">About Us</h5>
          <h1 style="font-size:1.8rem;">建立宗旨</h1>
          <p class="lead">
            目前市面上缺乏針對零基礎使用者設計的模擬投資平台，導致許多初學者必須經歷多次嘗試與失敗，才能逐步累積投資經驗。
            因此本專題旨在打造一個結合 Python Flask 與 Gemini AI 的智慧投資學習平台，協助新手投資者在無基礎的情況下也能有效入門投資，讓投資變得更簡單且可學習。
          </p>
          <h1 style="font-size:1.8rem;">網站特色</h1>
          <p class="lead" style="margin-bottom:10px;">
            使用者只需根據需求填寫表單，系統便會推薦合適股票，並提供報酬率模擬與模擬交易功能。透過 20 種交易策略，使用者可選擇策略並輸入股票，獲得對應的分析結果。
            如有疑問，可提交給 AI 解釋分析內容，AI 也會反問使用者以確認理解，實現互動式學習。
          </p>
          <p class="lead">此外，平台提供歷史資料模擬交易，隨機選股且隱藏代號，使用者需依圖表與判斷操作。模擬結束後，AI 將分析操作表現並提供策略建議，幫助學習與反思。</p>
          <a href="{{ url_for('dictionary') }}" class="btn btn-primary" style="margin-top:6px;">Learn More</a>
        </article>
      </div>
    </section>

    <!-- Services -->
    <section class="section">
      <div class="container">
        <header id="features-intro" class="pad card" style="margin-bottom:18px;">
          <h5 style="color:var(--primary);margin-bottom:6px;">網站功能特色</h5>
          <h1>為新手打造，結合 AI 的投資學習平台</h1>
        </header>

        <div class="grid">
          <a class="service" href="{{ url_for('risk') }}" aria-label="風險投資與推薦">
            <figure class="media"><img src="/static/image/mainpage/risk3.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-shield-fill-check"></i></span><h6 class="title">風險投資與推薦</h6></div>
            <p class="desc">透過精心設計的風險評估問卷，完成準確的分析與推薦適合的投資方向。</p>
          </a>

          <a class="service" href="{{ url_for('roi') }}" aria-label="投資報酬率計算">
            <figure class="media"><img src="/static/image/mainpage/roi2.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-calculator"></i></span><h6 class="title">投資報酬率計算</h6></div>
            <p class="desc">輸入投資與期間，快速估算與比較不同策略的報酬率表現。</p>
          </a>

          <a class="service" href="{{ url_for('journal') }}" aria-label="歷程追蹤">
            <figure class="media"><img src="/static/image/mainpage/journal2.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-book"></i></span><h6 class="title">歷程追蹤</h6></div>
            <p class="desc">將歷史模擬投資的每次交易詳細記錄，搭配股票代號與模擬時間，方便複習與回顧。</p>
          </a>

          <a class="service" href="{{ url_for('trade') }}" aria-label="策略套用">
            <figure class="media"><img src="/static/image/mainpage/strategies.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-graph-up"></i></span><h6 class="title">策略套用 × AI 即時數據投資</h6></div>
            <p class="desc">超過 15 種股票策略，套用即時數據，顯示關鍵指標並提供AI輔助判讀，體驗接近真實的交易流程。</p>
          </a>

          <a class="service" href="{{ url_for('industry_select_stock') }}" aria-label="AI 即時數據投資">
            <figure class="media"><img src="/static/image/mainpage/industry.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-bar-chart-line-fill"></i></span><h6 class="title">市場情勢模擬</h6></div>
            <p class="desc">利用特定產業，搭配三種策略與當時時空背景，感受不同市場情境下的策略與交易情形</p>
          </a>

          <a class="service" href="{{ url_for('simulation') }}" aria-label="AI 歷史數據模擬">
            <figure class="media"><img src="/static/image/mainpage/simulation.png" alt=""></figure>
            <div class="body"><span class="badge"><i class="bi bi-currency-dollar"></i></span><h6 class="title">AI 歷史數據模擬</h6></div>
            <p class="desc">使用隨機股票過往數據，加速時間進行買賣，結束後由 AI 反饋建議。</p>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p class="copyright">© 2025 Trade Nova</p>
    </div>
  </footer>

  <script>
    
// Header compact：品牌區在滑動後收合（雙段 scrollBy 補償 + 轉場結束調平 + 擴大量測遲滯 + 停用 scroll anchoring）
    (function () {
      var header = document.getElementById('siteHeader');
      if (!header) return;
      var brand = header.querySelector('.brand');
      var compact = false;
      var lockUntil = 0;

      function now(){ return (window.performance && performance.now) ? performance.now() : Date.now(); }

      function computeThresholds() {
        var expanded = brand ? brand.scrollHeight : 120;
        var ENTER = Math.max(140, expanded + 12);
        var EXIT  = Math.max(32, ENTER - 160);
        return { ENTER: ENTER, EXIT: EXIT };
      }
      var TH = computeThresholds();

      function finalizeAdjust(hBefore, hMid){
        var hAfter = header.getBoundingClientRect().height;
        var dy2 = hAfter - hMid;
        if (dy2 !== 0) window.scrollBy(0, -dy2);
      }

      function setCompact(next) {
        if (compact === next) return;
        var t = now();
        if (t < lockUntil) return;
        lockUntil = t + 180;

        var h0 = header.getBoundingClientRect().height;
        compact = next;
        header.classList.toggle('compact', next);

        window.requestAnimationFrame(function(){
          var h1 = header.getBoundingClientRect().height;
          var dy1 = h1 - h0;
          if (dy1 !== 0) window.scrollBy(0, -dy1);

          var done = false;
          function onEnd(){
            if (done) return;
            done = true;
            header.removeEventListener('transitionend', onEnd, true);
            finalizeAdjust(h0, h1);
          }
          header.addEventListener('transitionend', onEnd, true);
          setTimeout(onEnd, 460);
        });
      }

      var ticking = false;
      function onScroll() {
        if (!ticking) {
          window.requestAnimationFrame(function () {
            var y = window.scrollY || document.documentElement.scrollTop || 0;
            if (!compact && y > TH.ENTER) {
              setCompact(true);
            } else if (compact && y < TH.EXIT) {
              setCompact(false);
            }
            ticking = false;
          });
          ticking = true;
        }
      }

      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', function(){
        TH = computeThresholds();
        onScroll();
      }, { passive:true });
      onScroll();
    })();

    // 導覽列：內容放得下 -> 置中 & 關閉水平捲動；放不下 -> 靠左 & 可捲動（箭頭顯示）
    (function(){
      var wrap = document.getElementById('navWrap');
      var scroller = document.getElementById('navScroller');
      var leftBtn = document.getElementById('navLeft');
      var rightBtn = document.getElementById('navRight');
      if(!wrap || !scroller) return;

      function applyFitMode(){
        var fits = scroller.scrollWidth <= scroller.clientWidth + 1;
        if (fits){
          wrap.classList.add('nav-fit');
          scroller.scrollLeft = 0;
        } else {
          wrap.classList.remove('nav-fit');
        }
        updateArrows();
      }

      function updateArrows(){
        if (!leftBtn || !rightBtn) return;
        if (wrap.classList.contains('nav-fit')){
          leftBtn.style.display = rightBtn.style.display = 'none';
          return;
        }
        leftBtn.style.display = rightBtn.style.display = '';
        var max = Math.max(0, scroller.scrollWidth - scroller.clientWidth);
        leftBtn.disabled  = scroller.scrollLeft <= 0;
        rightBtn.disabled = scroller.scrollLeft >= (max - 1);
      }

      // 箭頭捲動
      function step(){ return Math.max(160, Math.round(scroller.clientWidth * 0.4)); }
      leftBtn && leftBtn.addEventListener('click', function(){ scroller.scrollBy({left:-step(), behavior:'smooth'}); });
      rightBtn && rightBtn.addEventListener('click', function(){ scroller.scrollBy({left: step(), behavior:'smooth'}); });
      scroller.addEventListener('scroll', updateArrows, { passive:true });

      // 初次與 resize、字體載入後都判斷一次
      applyFitMode();
      var rAF = 0;
      window.addEventListener('resize', function(){
        if (rAF) cancelAnimationFrame(rAF);
        rAF = requestAnimationFrame(applyFitMode);
      }, { passive:true });
      if (document.fonts && document.fonts.ready) { document.fonts.ready.then(applyFitMode); }
    })();
  </script>

  <script src="{{ url_for('static', filename='js/tutorial.js') }}"></script>
  <script>
    (function(){
      if (typeof initImageTutorial !== 'function') {
        console.warn('[tutorial] tutorial.js not loaded'); return;
      }
      const tutHome = initImageTutorial({
        pageKey: 'home',
        version: 'img-v1',
        images: [
          "{{ url_for('static', filename='image/tutorial/00_main_1.png') }}",
          "{{ url_for('static', filename='image/tutorial/00_main_2.png') }}"
        ],
        autoShow: {{ session.pop('show_home_tut', False)|tojson }},
        enableEsc: true
      });
      document.getElementById('navTutorialLink')?.addEventListener('click', function(e){
        e.preventDefault();
        try { tutHome.clear(); tutHome.show(); } catch(err){ console.warn('[tutorial] reopen failed', err); }
      });
    })();
  </script>
</body>
</html>
