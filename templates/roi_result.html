<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>投資報酬率結果</title>

  <!-- 思源宋體 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
  <!-- Bootstrap 4.5 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.3/css/bootstrap.min.css">
  <!-- 站內樣式（若有） -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <style>
    :root{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
    }
    html,body{height:100%;}
    body{
      display:flex;flex-direction:column;
      font-family:'Noto Serif TC',serif;
      line-height:1.6;
    }
    h1,h2,h3,h4,h5,h6{font-family:'Noto Serif TC',serif;font-weight:700;}
    h1{font-size:2rem;margin:1.5rem 0 2rem;text-align:center;}

    /* 背景動畫 */
    body::before{
      content:"";position:fixed;inset:0;
      background:url("https://png.pngtree.com/thumb_back/fh260/background/20231227/pngtree-gentle-blue-background-with-a-soft-textured-finish-image_13898387.png") center/cover no-repeat;
      filter:grayscale(20%) brightness(0.55);
      z-index:-2;animation:bgZoom 40s ease-in-out infinite alternate;
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.15);}}

    /* 卡片包裝 */
    .card-wrapper{
      background:rgba(255,255,255,.94);
      border-radius:.8rem;
      box-shadow:0 10px 30px rgba(0,0,0,.05);
      padding:2rem 2rem 3rem;
    }

    /* Home 按鈕 */
    .btn-home{
      display:inline-block;text-decoration:none;font-weight:700;
      padding:.6rem 1.25rem;border-radius:999px;
      border:1.5px solid var(--primary);background:#fff;color:var(--primary);
      transition:background .2s ease,color .2s ease,box-shadow .2s ease,transform .05s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn-home:hover{background:var(--primary);color:#fff;box-shadow:0 8px 16px rgba(4,59,143,.18);transform:translateY(-1px);}
    .btn-home:active{transform:translateY(0);box-shadow:0 4px 8px rgba(4,59,143,.18);}
    .btn-home,.btn-home:focus,.btn-home:active,.btn-home:focus-visible{outline:none!important;box-shadow:none!important;border-color:var(--primary)!important;}

    /* 資訊方塊 */
    .stat{border:1px solid #e7ebf2;border-radius:.75rem;padding:1rem 1.25rem;background:#fff;}
    .stat .label{color:#50607a;font-size:.9rem;margin-bottom:.25rem;}
    .stat .value{font-size:1.25rem;font-weight:700;}

    /* 頁腳 */
    footer{background:var(--secondary);color:#fff;text-align:center;}
    footer h5{font-size:1.125rem;margin-bottom:1rem;}
    footer ul{list-style:none;padding-left:0;margin-bottom:1.5rem;}
    footer li{margin-bottom:.25rem;}
    footer .copyright{border-top:1px solid rgba(255,255,255,.72);margin-top:2rem;padding-top:1rem;font-size:.875rem;color:#ccc;}
  </style>

  <!-- Plotly CDN（結果頁需要） -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <main class="flex-grow-1">
    <div class="container mt-5 mb-5 card-wrapper">
      <div class="mb-3 d-flex justify-content-between align-items-center">
        <a href="{{ url_for('main') }}" class="btn-home">Home</a>
        <a href="{{ url_for('roi') }}" class="btn btn-outline-primary">重新試算</a>
      </div>

      <h1>試算結果</h1>

      <!-- 基本資訊 -->
      <div class="row">
        <div class="col-md-3 mb-3">
          <div class="stat">
            <div class="label">股票代號</div>
            <div class="value">{{ stock_id }}</div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="stat">
            <div class="label">投入金額</div>
            <div class="value">{{ '{:,.0f}'.format(investment) }} 元</div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="stat">
            <div class="label">區間</div>
            <div class="value">{{ result.desc }}</div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="stat">
            <div class="label">報酬率</div>
            <div class="value">{{ '{:+.2f}%'.format(result.roi) }}</div>
          </div>
        </div>
      </div>

      <!-- 價格走勢圖（Plotly） -->
      <div class="mt-4">
        {{ result.plot_html | safe }}
      </div>

      <!-- 起迄價格 -->
      <div class="row mt-4">
        <div class="col-md-6 mb-3">
          <div class="stat">
            <div class="label">起始收盤價</div>
            <div class="value">{{ '{:,.2f}'.format(result.start_price) }}</div>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="stat">
            <div class="label">期末收盤價</div>
            <div class="value">{{ '{:,.2f}'.format(result.end_price) }}</div>
          </div>
        </div>
      </div>

      <!-- 最終價值 -->
      <div class="row mt-2">
        <div class="col-md-12">
          <div class="stat">
            <div class="label">期末持有價值</div>
            <div class="value">{{ '{:,.0f}'.format(result.final_value) }} 元</div>
          </div>
        </div>
      </div>

      <div class="text-center mt-4">
        <a href="{{ url_for('roi') }}" class="btn btn-primary btn-lg px-5">再次試算</a>
      </div>
    </div>
  </main>

  <footer class="py-5">
    <div class="container">
      <h5 class="text-white">貼心提醒</h5>
      <ul>
        <li>本結果僅供參考，實際投資需自行承擔風險與收益。</li>
        <li>若遇非交易日，區間資料可能不足而自動縮短。</li>
      </ul>
      <div class="copyright">© 2025 投資工具平台 All rights reserved.</div>
    </div>
  </footer>

  <!-- jQuery & Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
