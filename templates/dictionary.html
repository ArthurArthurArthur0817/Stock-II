<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>股票策略名詞解釋</title>

  <!-- 思源宋體 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
  <!-- Bootstrap 4.5（保留相容性） -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.3/css/bootstrap.min.css">

  <style>
    :root{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
      --gap:12px;
      /* 用 clamp 讓卡片尺寸自適應：手機 120px ～ 桌機 220px */
      --card-size: clamp(120px, 28vw, 220px);
      --glass-bg: rgba(255,255,255,.26);
      --glass-br: rgba(255,255,255,.70);
      --glass-inner: rgba(255,255,255,.45);
      --ink:#0b1733;
      --radius-lg: 22px;
      --radius-md: 18px;
      --radius-sm: 14px;
    }
    html,body{height:100%;margin:0;}
    body{
      display:flex;flex-direction:column;
      font-family:'Noto Serif TC',serif;
      line-height:1.6;color:#0b1733;
    }
    h1{font-size:clamp(1.5rem, 2.6vw, 2rem);margin:.25rem 0;text-align:center;font-weight:700;}
    .subheading{font-size:clamp(.9rem, 1.6vw, 1rem);opacity:.85;margin-bottom:1.25rem;text-align:center}

    /* 背景：柔和藍底 + 細微縮放 */
    body::before{
      content:"";position:fixed;inset:0;
      background:url("https://png.pngtree.com/thumb_back/fh260/background/20231227/pngtree-gentle-blue-background-with-a-soft-textured-finish-image_13898387.png") center/cover no-repeat;
      filter:grayscale(15%) brightness(0.62);
      z-index:-3;animation:bgZoom 40s ease-in-out infinite alternate;
    }
    /* 光暈聚焦 */
    body::after{
      content:"";position:fixed;inset:0;pointer-events:none;z-index:-2;
      background:
        radial-gradient(1200px 600px at 50% 10%, rgba(255,255,255,.18), transparent 60%),
        radial-gradient(900px 700px at 90% 20%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(700px 600px at 10% 80%, rgba(255,255,255,.10), transparent 60%);
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.12);}}
    @media (prefers-reduced-motion: reduce){
      body::before{animation:none}
    }

    /* ===================== 白色外框（頁面主卡） ===================== */
    .page-shell{ padding: clamp(20px, 3vw, 40px) 16px; }
    .page-frame{
      max-width: 1160px; margin: 0 auto;
      background: rgba(255,255,255,.42);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      border-radius: var(--radius-lg);
      border: 1px solid var(--glass-br);
      box-shadow: 0 24px 48px rgba(0,0,0,.10), inset 0 0 0 1px var(--glass-inner);
      position: relative; overflow: clip;
    }
    .page-frame::before,.page-frame::after{
      content:""; position:absolute; pointer-events:none;
      width: clamp(140px, 16vw, 220px); height: clamp(140px, 16vw, 220px);
      border-radius: 50%; filter: blur(30px); opacity:.25;
    }
    .page-frame::before{ top:-60px; left:-60px; background: #cfe6ff; }
    .page-frame::after{ bottom:-60px; right:-60px; background:#d9f1ff; }

    /* 內部分區 */
    .header-strip{
      padding: clamp(12px, 2vw, 18px) clamp(14px, 2.2vw, 22px);
      border-bottom:1px solid rgba(255,255,255,.75);
      background: linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.22));
    }
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    .titlewrap{
      flex:1 1 auto; display:flex; flex-direction:column; align-items:center; min-width:240px;
    }

    .card-wrapper{
      background: var(--glass-bg);
      backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
      border-radius: var(--radius-md);
      box-shadow: 0 10px 26px rgba(0,0,0,.06), inset 0 0 0 1px var(--glass-inner);
      border: 1px solid var(--glass-br);
      padding: clamp(14px, 2.2vw, 28px) clamp(12px, 2vw, 22px) clamp(18px, 2.4vw, 28px);
      margin: clamp(12px, 2vw, 18px);
    }

    /* Home 按鈕 */
    .btn-home{
      display:inline-block;text-decoration:none;font-weight:700;
      padding:.55rem 1.1rem;border-radius:999px;
      border:1.5px solid var(--primary);background:#fff;color:var(--primary);
      transition:background .2s ease,color .2s ease,box-shadow .2s ease,transform .05s ease;
      -webkit-tap-highlight-color: transparent;font-size:clamp(.9rem, 1.6vw, 1rem);
    }
    .btn-home:hover{background:var(--primary);color:#fff;box-shadow:0 8px 16px rgba(4,59,143,.18);transform:translateY(-1px);}
    .btn-home:active{transform:translateY(0);box-shadow:0 4px 8px rgba(4,59,143,.18);}
    .btn-home:focus-visible{outline:3px solid rgba(100,153,233,.6);outline-offset:2px}

    /* ===================== 版面：側欄＋九宮格 ===================== */
    .main-container{
      display:flex; justify-content:center; align-items:flex-start; gap:16px;
    }

    /* —— 桌機：左側固定寬度 —— */
    .sidebar{width:220px; flex:0 0 220px;}
    .content{display:flex; flex-direction:column; align-items:center; overflow:visible; width:100%;}

    /* 九宮格容器（自適應欄數） */
    .card-container{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(var(--card-size), 1fr));
      gap: var(--gap);
      width: 100%;
      max-width: calc(3 * 220px + 2 * var(--gap));
    }

    /* ===== 字卡 ===== */
    .card{
      position: relative; width: 100%;
      aspect-ratio: 1 / 1; height: auto;
      perspective:1200px; contain: layout style; isolation: isolate;
      will-change: transform; overflow: visible;
    }
    .card-inner{
      position: relative; width: 100%; height: 100%;
      transform-style: preserve-3d; will-change: transform;
      transform: rotateY(var(--rot, 0deg)) scale(var(--s, 1)) translateZ(0);
      transition: transform 1100ms cubic-bezier(.22,.72,.18,1) var(--delay,80ms);
    }
    .card:hover { z-index: 5; }
    .card:hover .card-inner{ --rot: 180deg; --s: 1.03; }

    /* 觸控：點擊也能翻（行動裝置） */
    .card:active .card-inner{ --rot: 180deg; --s: 1.02; }

    .card-front, .card-back{
      position: absolute; inset: 0; display:flex; justify-content:center; align-items:center;
      border-radius: var(--radius-sm); padding: clamp(12px, 2vw, 20px);
      color: #fff; text-align: center; font-weight: 700; font-size: clamp(.9rem, 1.8vw, 1rem);
      box-shadow: 0 8px 16px rgba(0,0,0,.14), 0 2px 6px rgba(0,0,0,.08);
      backface-visibility: hidden; -webkit-backface-visibility: hidden;
      transform: translateZ(0.5px);
      -webkit-font-smoothing: antialiased;
      transition: box-shadow .28s ease .48s;
      background-image: linear-gradient( to bottom, rgba(255,255,255,.08), rgba(0,0,0,.06) );
      border:1px solid rgba(255,255,255,.35);
      word-break: break-word;
    }
    .card-back{ transform: rotateY(180deg) translateZ(0.5px); font-weight: 500; font-size: clamp(.88rem, 1.7vw, .98rem); }
    .card:hover .card-front, .card:hover .card-back { box-shadow: 0 14px 28px rgba(0,0,0,.18); }

    @supports not (aspect-ratio: 1 / 1){
      .card::before{ content:""; display:block; padding-top:100%; }
      .card-inner{ position:absolute; inset:0; }
    }

    /* 側欄按鈕（桌機） */
    .sidebar button{
      width:100%;margin-bottom:10px;padding:12px 12px;
      background:#fff;color:var(--primary);border:1px solid var(--primary);
      border-radius:12px;cursor:pointer;font-weight:700;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      box-shadow:0 4px 10px rgba(4,59,143,.08);
      font-size: .95rem;
    }
    .sidebar button:hover{background:var(--primary);color:#fff;transform: translateY(-1px);box-shadow:0 10px 18px rgba(4,59,143,.18);}
    .sidebar button:focus-visible{outline:3px solid rgba(100,153,233,.6);outline-offset:2px}

    /* 分頁 */
    .pagination{
      margin-top:clamp(18px, 3vw, 32px);
      display:flex;justify-content:center;align-items:center;gap:14px;flex-wrap:wrap;
      width:100%;
    }
    .pagination button{
      padding:10px 16px;font-size:1rem;cursor:pointer;border-radius:999px;
      border:1px solid var(--primary);background:#fff;color:var(--primary);
      transition: background .2s ease, color .2s ease, transform .06s ease, box-shadow .2s ease;
      box-shadow:0 4px 10px rgba(4,59,143,.06); min-width:108px;
    }
    .pagination button:hover{background:var(--primary);color:#fff;transform: translateY(-1px);box-shadow:0 10px 18px rgba(4,59,143,.18);}
    .pagination button:disabled{opacity:.45; cursor:not-allowed; transform:none;}

    /* ======= 手機/平板 RWD 強化 ======= */
    /* 768px 以下：側欄改為頂部可橫滑按鈕列 + 下拉選單備用 */
    .mobile-topic-bar{
      display:none;
      gap:8px; overflow-x:auto; -webkit-overflow-scrolling: touch; padding-bottom:6px; margin-bottom:8px;
    }
    .mobile-topic-bar::-webkit-scrollbar{height:6px}
    .mobile-topic-bar::-webkit-scrollbar-thumb{background:rgba(4,59,143,.25);border-radius:999px}

    .mobile-topic-select{ display:none; width:100%; margin:6px 0 10px; }

    @media (max-width: 991.98px){ /* 平板含以下：左右改上下排列 */
      .main-container{flex-direction:column; gap:12px;}
      .sidebar{display:none;} /* 隱藏桌機側欄 */
      .mobile-topic-bar{display:flex; flex-wrap:nowrap;}
      .mobile-topic-select{display:block;}
      .card-container{max-width: 100%;}
      .page-frame{border-radius:18px}
      .card-wrapper{border-radius:16px}
    }

    @media (max-width: 575.98px){ /* 手機：字級、間距再縮，按鈕更好點 */
      .btn-home{padding:.5rem 1rem}
      .subheading{margin-bottom:.9rem}
      .pagination{gap:10px}
      .pagination button{min-width:44%; padding:12px 14px; font-size:.98rem}
      .mobile-topic-bar button{flex:0 0 auto}
    }

    /* 頁腳（如未使用可略） */
    footer{background:var(--secondary);color:#fff;text-align:center;}
    footer h5{font-size:1.125rem;margin-bottom:1rem;}
    footer ul{list-style:none;padding-left:0;margin-bottom:1.5rem;}
    footer li{margin-bottom:.25rem;}
    footer .copyright{border-top:1px solid rgba(255,255,255,.72);margin-top:1.25rem;padding-top:.9rem;font-size:.875rem;color:#ccc;}
  </style>
</head>
<body>
  <main class="flex-grow-1 page-shell">
    <div class="page-frame">
      <!-- 頂部條（白框內的分隔） -->
      <div class="header-strip">
        <div class="topbar">
          <a href="{{ url_for('main') }}" class="btn-home">Home</a>
          <div class="titlewrap">
            <h1>股票主題學習卡片</h1>
            <div class="subheading">九宮格翻牌學習｜簡單易懂｜趣味遊戲</div>
          </div>
          <span style="width:92px"></span><!-- 置中對齊的小占位 -->
        </div>
      </div>

      <!-- 內容區 -->
      <div class="card-wrapper">
        <div class="main-container">
          <!-- 桌機側欄（在手機/平板會隱藏） -->
          <div class="sidebar" id="topicList"></div>

          <!-- 手機/平板主題選擇（桌機隱藏） -->
          <div class="mobile-topic-select">
            <select id="topicSelect" class="form-control"></select>
          </div>
          <div class="mobile-topic-bar" id="topicBar"></div>

          <!-- 右側內容 -->
          <div class="content">
            <div class="card-container" id="cardContainer"></div>

            <div class="pagination">
              <button id="prevPage">上一頁</button>
              <span id="pageInfo"></span>
              <button id="nextPage">下一頁</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- jQuery & Bootstrap JS（保留相容） -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    /* ====== 資料 ====== */
    const topics = {
      "技術分析與交易策略": [
        { name: "布林帶策略", description: "用三條線包住價格，當價格碰到上下邊界時，可能代表太貴或太便宜，是進出場的參考點。" },
        { name: "布林帶定向策略", description: "除了看布林帶，也看成交量，幫助你判斷這個價格變化是不是「真的」動起來了。" },
        { name: "通道突破策略", description: "價格如果「突破」上下界線，表示有大變動發生，是追漲或殺跌的信號。" },
        { name: "肯特納通道策略", description: "用平均價格加上波動幅度畫出一個通道，判斷趨勢是向上還是向下。" },
        { name: "移動平均線交叉策略", description: "短期均線從下往上穿過長期均線是買進訊號，反之則是賣出訊號。" },
        { name: "移動平均雙線交叉策略", description: "觀察兩條不同天數的均線是否交叉，判斷趨勢可能轉變。" },
        { name: "SAR 拋物線策略", description: "SAR 點點顯示可能的反轉位置，幫助你抓停利或停損點。" },
        { name: "超級趨勢策略", description: "結合趨勢與波動資訊，抓出多空轉折點。" },
        { name: "RSI 策略", description: "RSI 超過 70 可能太熱，低於 30 可能太冷，用來判斷買賣時機。" },
        { name: "慢速隨機策略(KD指標)", description: "根據 %K 和 %D 線的交叉決定進出場，像在看市場節奏快慢。" }
      ],
      "進階與突破型策略": [
        { name: "動量策略", description: "如果股票漲得很快，可能還會繼續漲；跌得快，也可能繼續跌。" },
        { name: "ADX 突破策略", description: "ADX 高代表趨勢強，可以考慮順勢；低則表示市場不明朗，暫時觀望。" },
        { name: "樞軸點策略", description: "用前一天價格算出支撐與壓力位，幫助今天判斷漲跌轉折點。" },
        { name: "BarUpDn 策略", description: "今天收盤比昨天高，表示上漲趨勢；比昨天低，則是下跌趨勢。" },
        { name: "連續向上/向下策略", description: "如果連漲幾天，可能太熱要小心；連跌幾天，也可能要反彈了。" },
        { name: "Inside Bar 策略", description: "今天的價格範圍被昨天包住，表示市場安靜，可能準備爆發大行情。" },
        { name: "OutSide Bar 策略", description: "今天的價格波動超越昨天，代表市場強烈波動，是出手或避開的關鍵時刻。" },
        { name: "Price Channel 策略", description: "看價格在一個上下範圍內來回跑，碰邊界時考慮反方向操作。" }
      ],
      "情緒與風險類策略": [
        { name: "貪婪策略", description: "為了多賺一點不斷加碼，但風險很大，容易從賺錢變賠錢。" },
        { name: "MACD 策略", description: "利用兩條線的交叉和柱狀圖看趨勢走向，是常見的趨勢判斷工具。" }
      ],
      "技術指標": [
        { name: "EMA", description: "一種平均價格，最近的價格變化會更被重視。" },
        { name: "VWAP", description: "機構常用的平均價，比單純價格更能反映真實價值。" },
        { name: "OBV", description: "觀察資金是流入還是流出股票，判斷人多在哪邊。" },
        { name: "成交量", description: "代表今天交易多不多，量大通常代表很多人在關注這檔股票。" },
        { name: "均線 (MA)", description: "看股票過去一段時間的平均價格，幫助你看趨勢方向。" }
      ],
      "基本面指標": [
        { name: "本益比 (PE Ratio)", description: "股價除以公司每年賺的錢，數字越高代表越貴。" },
        { name: "殖利率", description: "買股票得到的年回報比率，像銀行定存利率的概念。" },
        { name: "股價淨值比 (P/B Ratio)", description: "股價跟公司資產的比值，太高可能被高估。" },
        { name: "營收成長率", description: "營業收入成長越快，通常代表公司越有潛力。" },
        { name: "負債比", description: "公司有多少錢是借來的，負債高可能風險較大。" },
        { name: "每股盈餘 (EPS)", description: "公司賺多少錢除以股票數，幫你了解每張股票賺的錢。" },
        { name: "ROE 股東權益報酬率", description: "公司幫股東賺錢的效率，高代表公司運用資金有效率。" },
        { name: "現金流量", description: "實際進出的現金，正現金流代表公司活力強。" },
        { name: "毛利率", description: "公司賣東西扣掉成本後還能賺多少錢。" }
      ],
      "投資理財觀念": [
        { name: "複利的力量", description: "利滾利讓小錢變大錢，是投資最強的武器。" },
        { name: "風險與報酬", description: "報酬高的投資通常風險也高，要找到適合自己的平衡。" },
        { name: "資產配置", description: "別把所有錢放一種投資，分散風險才穩。" },
        { name: "長期 vs 短期投資", description: "短期波動大，長期才能靠複利累積財富。" },
        { name: "ETF 投資", description: "像一籃子股票，風險低又簡單，是新手好選擇。" },
        { name: "定期定額", description: "固定時間投入固定金額，不用猜高低點，平均成本。" },
        { name: "緊急預備金", description: "存一筆錢備不時之需，避免投資時急著賣股票。" },
        { name: "投資 vs 投機", description: "投資是穩定增值，投機是賭漲跌，風險與心態完全不同。" },
        { name: "資金管理", description: "不要把全部資金都壓在一個點上，學會分配與控制風險。" },
        { name: "財務目標設定", description: "先想清楚為什麼投資，是為了退休、買房，還是學費？目標不同策略也不同。" }
      ],
      "投資心理學": [
        { name: "羊群效應", description: "大家買你就跟著買，小心變成最後接盤的那個人。" },
        { name: "FOMO", description: "怕錯過賺錢機會而亂買，常讓人追高殺低。" },
        { name: "貪婪與恐懼", description: "看到漲就想買，看到跌就急著賣，這是虧錢的來源。" },
        { name: "確認偏誤", description: "只看支持自己想法的資訊，會讓判斷變得不客觀。" },
        { name: "紀律投資", description: "照計劃做事，不因情緒而改變，才是狀穩定賺錢的關鍵。" },
        { name: "後悔心態", description: "沒買就漲會懊悔，買了就跌會自責，要學會接受結果。" },
        { name: "停損恐懼", description: "不敢認賠是新手常見錯誤，小虧不忍會變大虧。" },
        { name: "過度自信", description: "一兩次賺錢就以為自己是股神，小心反被市場教訓。" },
        { name: "賭徒心態", description: "輸了想翻本、贏了想加碼，這是賭場不是投資。" },
        { name: "短視近利", description: "只看明天賺多少，容易忽略長期風險與機會。" }
      ]
    };

    const colors = [
      "#00507D", "#0A5A87", "#146492", "#1E6E9C", "#2878A6",
      "#3382B0", "#3D8DBA", "#4797C4", "#51A1CE", "#5BADD8",
      "#65B7E2", "#70C1EC", "#7ACBF6", "#84D5FF"
    ];

    let currentTopic = null;
    let currentPage = 1;
    const itemsPerPage = 9; // 固定 9 宮格

    const topicList = document.getElementById("topicList");     // 桌機側欄
    const topicBar  = document.getElementById("topicBar");       // 行動橫滑列
    const topicSelect = document.getElementById("topicSelect");  // 行動下拉
    const cardContainer = document.getElementById("cardContainer");
    const prevPageBtn = document.getElementById("prevPage");
    const nextPageBtn = document.getElementById("nextPage");
    const pageInfo = document.getElementById("pageInfo");

    /* ====== 建立主題按鈕 / 下拉 ====== */
    function buildTopics(){
      topicList.innerHTML = "";
      topicBar.innerHTML = "";
      topicSelect.innerHTML = "";

      Object.keys(topics).forEach(topic => {
        // 桌機側欄按鈕
        const btn = document.createElement("button");
        btn.textContent = topic;
        btn.onclick = () => { setTopic(topic); };
        topicList.appendChild(btn);

        // 行動：橫滑按鈕
        const mbtn = document.createElement("button");
        mbtn.textContent = topic;
        mbtn.className = "btn btn-light";
        mbtn.style.border = "1px solid var(--primary)";
        mbtn.style.color = "var(--primary)";
        mbtn.style.borderRadius = "999px";
        mbtn.style.padding = "8px 12px";
        mbtn.onclick = () => { setTopic(topic); topicSelect.value = topic; };
        topicBar.appendChild(mbtn);

        // 行動：下拉
        const opt = document.createElement("option");
        opt.value = topic; opt.textContent = topic;
        topicSelect.appendChild(opt);
      });

      topicSelect.onchange = (e)=> setTopic(e.target.value);
    }

    function setTopic(topic){
      currentTopic = topic;
      currentPage = 1;
      renderCards();
      // 同步選取狀態（可選：讓被選主題的行動按鈕視覺更明顯）
      [...topicBar.children].forEach(btn=>{
        btn.classList.toggle("active", btn.textContent === topic);
        btn.style.background = btn.classList.contains("active") ? "var(--primary)" : "#fff";
        btn.style.color = btn.classList.contains("active") ? "#fff" : "var(--primary)";
      });
    }

    /* ====== 卡片渲染 ====== */
    function renderCards() {
      const terms = topics[currentTopic] || [];
      const startIndex = (currentPage - 1) * itemsPerPage;
      const currentTerms = terms.slice(startIndex, startIndex + itemsPerPage);

      cardContainer.innerHTML = "";
      currentTerms.forEach((term, index) => {
        const card = document.createElement("div");
        card.className = "card";

        const delay = 60 + index * 30; // ms
        card.style.setProperty('--delay', delay + 'ms');

        const cardInner = document.createElement("div");
        cardInner.className = "card-inner";

        const front = document.createElement("div");
        front.className = "card-front";
        front.style.backgroundColor = colors[index % colors.length];
        front.textContent = term.name;

        const back = document.createElement("div");
        back.className = "card-back";
        back.style.backgroundColor = colors[index % colors.length];
        back.textContent = term.description;

        cardInner.appendChild(front);
        cardInner.appendChild(back);
        card.appendChild(cardInner);
        cardContainer.appendChild(card);
      });

      const totalPages = Math.ceil(terms.length / itemsPerPage) || 1;
      pageInfo.textContent = `第 ${currentPage} 頁 / 共 ${totalPages} 頁`;
      prevPageBtn.disabled = currentPage === 1;
      nextPageBtn.disabled = currentPage === totalPages;

      // 填滿 9 宮格，確保每頁版型不歪（即使在 RWD 下也維持整頁視覺）
      const blankCount = itemsPerPage - currentTerms.length;
      for (let i = 0; i < blankCount; i++) {
        const blankCard = document.createElement("div");
        blankCard.className = "card";
        blankCard.style.visibility = "hidden";
        cardContainer.appendChild(blankCard);
      }
    }

    prevPageBtn.onclick = () => {
      if (currentPage > 1) {
        currentPage--;
        renderCards();
      }
    };
    nextPageBtn.onclick = () => {
      const totalPages = Math.ceil((topics[currentTopic] || []).length / itemsPerPage) || 1;
      if (currentPage < totalPages) {
        currentPage++;
        renderCards();
      }
    };

    /* ====== 初始化 ====== */
    buildTopics();
    const defaultTopic = Object.keys(topics)[0];
    setTopic(defaultTopic);
    topicSelect.value = defaultTopic;
  </script>
</body>
</html>
