<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Transaction History</title>

  <!-- Font: Noto Serif TC -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet"/>

  <!-- Bootstrap 4.5 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.3/css/bootstrap.min.css"/>

  <!-- (可選) 你的外部樣式 -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}"/>

  <style>
    /* 1) 全域配色 */
    :root{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
    }

    /* 2) 版面字型與結構 */
    html,body{height:100%;}
    body{
      display:flex;
      flex-direction:column;
      font-family:'Noto Serif TC',serif;
      line-height:1.6;
      background:transparent;
      margin:0;
    }
    h1,h2,h3,h4,h5,h6{
      font-family:'Noto Serif TC',serif;
      font-weight:700;
    }

    /* 3) 背景縮放動畫 */
    body::before{
      content:"";
      position:fixed;inset:0;
      background:url("https://png.pngtree.com/thumb_back/fh260/background/20231227/pngtree-gentle-blue-background-with-a-soft-textured-finish-image_13898387.png") center/cover no-repeat;
      filter:grayscale(20%) brightness(0.55);
      z-index:-1;
      animation:bgZoom 40s ease-in-out infinite alternate;
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.15);}}

    /* 4) 主要內容卡片 */
    .card-wrapper{
      background:rgba(255,255,255,.94);
      border-radius:.8rem;
      box-shadow:0 10px 30px rgba(0,0,0,.05);
      padding:2rem 2rem 2.5rem;
      margin-top:3rem;
      margin-bottom:3rem;
    }

    /* 5) 標題 */
    h1{
      font-size:2rem;
      margin:1.2rem 0 1.8rem;
      text-align:center;
      color:var(--primary);
      letter-spacing:.03rem;
    }

    /* 6) 表格樣式 */
    .table{
      background:#fff;
      border-radius:.5rem;
      overflow:hidden;
    }
    .table thead th{
      background:#f4f7fb;
      border-bottom:1px solid #e6ecf3;
      color:#223;
      white-space:nowrap;
    }
    .table td, .table th{
      vertical-align:middle;
    }

    /* 7) 按鈕樣式（與前頁一致）*/
    .btn{
      border-radius:2rem;
      font-weight:600;
    }
    .btn-primary{
      background-color:var(--primary);
      border-color:var(--primary);
      box-shadow:0 4px 8px rgba(0,0,0,.08);
      transition:box-shadow .3s ease, background-color .3s ease, border-color .3s ease;
    }
    .btn-primary:hover{
      background-color:var(--primary-dark);
      border-color:var(--primary-dark);
      box-shadow:0 6px 12px rgba(0,0,0,.12);
    }
    .btn-outline-primary{
      color:var(--primary);
      border-color:var(--primary);
      background-color:transparent;
    }
    .btn-outline-primary:hover{
      background-color:var(--primary);
      color:#fff;
      box-shadow:0 6px 12px rgba(0,0,0,.1);
    }

    /* === 先把行動裝置點擊高亮關掉（避免橘色閃一下） === */
a.btn, button.btn {
  -webkit-tap-highlight-color: transparent;
}

/* === 乾脆把所有 Bootstrap 4 可能用到的 focus/active 狀態一次覆寫 === */
/* 只針對按鈕類，不波及全站可存取性 */
.btn,
.btn:focus,
.btn.focus,
.btn:active,
.btn.active,
.btn:focus:active,
.btn:active:focus,
.btn:focus-visible,
.btn-primary,
.btn-primary:focus,
.btn-primary.focus,
.btn-primary:active,
.btn-primary.active,
.btn-outline-primary,
.btn-outline-primary:focus,
.btn-outline-primary.focus,
.btn-outline-primary:active,
.btn-outline-primary.active,
.show > .btn.dropdown-toggle,
.show > .btn-primary.dropdown-toggle,
.show > .btn-outline-primary.dropdown-toggle {
  outline: none !important;
  box-shadow: none !important;                 /* 干掉預設橘／藍光暈 */
  border-color: var(--primary) !important;     /* 統一成主色邊框 */
}

/* 主按鈕：hover/active/focus 都維持藍系，不出現橘邊 */
.btn-primary:hover,
.btn-primary:active,
.btn-primary.active,
.btn-primary:focus,
.btn-primary.focus {
  background-color: var(--primary-dark) !important;
  border-color: var(--primary-dark) !important;
  color: #fff !important;
}

/* 外框按鈕：hover/active/focus 反白為實心藍；沒有橘色邊框 */
.btn-outline-primary:hover,
.btn-outline-primary:active,
.btn-outline-primary.active,
.btn-outline-primary:focus,
.btn-outline-primary.focus {
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
  color: #fff !important;
}

  </style>
</head>
<body>
  <main class="flex-grow-1">
    <div class="container">
      <div class="card-wrapper">
        <h1>Transaction History</h1>

        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Stock</th>
                <th class="text-right">Quantity</th>
                <th class="text-right">Price</th>
                <th>Transaction Time</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              {% for transaction in transactions %}
              <tr>
                <td>{{ transaction.stock }}</td>
                <td class="text-right">{{ transaction.quantity }}</td>
                <td class="text-right">
                  {% if transaction.price is not none %}
                    ${{ "%.2f"|format(transaction.price) }}
                  {% else %}
                    N/A
                  {% endif %}
                </td>
                <td>{{ transaction.transaction_time }}</td>
                <td>{{ transaction.type }}</td>
              </tr>
              {% else %}
              <tr>
                <td colspan="5" class="text-center text-muted">No transactions found.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="mt-4 text-center">
          <a href="{{ url_for('account') }}" class="btn btn-outline-primary px-4">Back to account</a>
        </div>
      </div>
    </div>
  </main>

  <!-- jQuery & Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
