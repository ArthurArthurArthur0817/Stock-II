<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ¨¡æ“¬ç´€éŒ„ç¸½è¦½</title>

  <!-- å­—é«”ï¼šæ€æºå®‹é«” -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ===== ä¸»é¡Œè‰²ç¥¨ï¼ˆåªå½±éŸ¿èƒŒæ™¯/æŒ‰éˆ•/é é ­/å­—æ¨£ï¼‰==== */
    :root{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
      --ink:#0f172a;
      --card-bg:#ffffff; /* ä¸­å¤®ç™½è‰²å€å¡Šï¼šä¸å‹•å®ƒçš„æ¨£å¼ï¼Œåªä¾›éœ€è¦æ™‚åƒè€ƒ */
    }

    /* ===== å…¨ç«™å­—é«”ï¼ˆå­—æ¨£ï¼‰===== */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Noto Serif TC', serif; /* åªæ”¹å­—é«” */
      color: var(--ink);
      line-height: 1.65;
    }

    /* ===== èƒŒæ™¯ï¼ˆä¸å‹•ä¸­é–“å…§å®¹ï¼‰===== */
    body {
      position: relative;
      background: transparent; /* ç”± ::before æ¥æ‰‹ */
    }
    /* 5.  èƒŒæ™¯å‹•ç•« */
    body::before{
      content:"";
      position:fixed;inset:0;
      background:url("https://png.pngtree.com/thumb_back/fh260/background/20231227/pngtree-gentle-blue-background-with-a-soft-textured-finish-image_13898387.png") center/cover no-repeat;
      filter:grayscale(20%) brightness(0.55);
      z-index:-2;
      animation:bgZoom 40s ease-in-out infinite alternate;
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.15);}}

    /* ===== é é ­ï¼ˆHeaderï¼‰åªæ”¹å¤–è§€ï¼Œä¸å‹•çµæ§‹ ===== */
    header{
      position: sticky; top: 0;
      display:flex; justify-content:space-between; align-items:center;
      padding: 16px 22px;
      background: rgba(255,255,255,.88);
      backdrop-filter: saturate(140%) blur(8px);
      -webkit-backdrop-filter: saturate(140%) blur(8px);
      border-bottom: 1px solid rgba(4,59,143,.12);
      box-shadow: 0 8px 22px rgba(0,0,0,.06);
      z-index: 10;
    }
    header h1{
      margin: 0;
      font-size: 1.6rem;         /* å­—æ¨£å¤§å°å¾®èª¿ */
      letter-spacing: .5px;
      color: var(--primary);
      font-weight: 700;
    }

    /* ===== æŒ‰éˆ•ï¼ˆ.btnï¼‰é¢¨æ ¼ï¼Œåªæ”¹å¤–è§€ ===== */
    .btn{
      display:inline-block;
      text-decoration:none;
      font-weight:700;
      padding:.6rem 1.25rem;
      border-radius: 999px;
      border:1.5px solid var(--primary);
      background:#fff;
      color:var(--primary);
      transition: background .2s ease, color .2s ease, box-shadow .2s ease, transform .05s ease;
    }
    .btn:hover{
      background: var(--primary);
      color: #fff;
      box-shadow: 0 8px 16px rgba(4,59,143,.18);
      transform: translateY(-1px);
    }
    .btn:active{
      transform: translateY(0);
      box-shadow: 0 4px 8px rgba(4,59,143,.18);
    }

    /* ===== ä¸­å¤®ç™½è‰²å…§å®¹å€ï¼šä¸ä¿®æ”¹ç¾æœ‰è¦å‰‡ ===== */
    /* ä½ åŸæœ¬çš„è¡¨æ ¼/åœ–è¡¨æ¨£å¼è‹¥æœ‰ï¼Œç¶­æŒä¸è®Šï¼›æ­¤è™•ä¸æ·»åŠ /è¦†è“‹ä»»ä½• table æˆ–ä¸­é–“å®¹å™¨è¦å‰‡ */

  </style>

  <!-- Chart.jsï¼ˆåŠŸèƒ½ä¸è®Šï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- é é ­ï¼šåªæ”¹å¤–è§€ï¼Œä¸æ”¹çµæ§‹ -->
  <header>
    <h1>Process Tracking</h1>
    <a href="{{ url_for('main') }}" class="btn">Home</a>
  </header>

  <!-- ===== ä¸­å¤®ç™½è‰²å€å¡Šï¼šä¿æŒåŸæ¨£ï¼Œä»¥ä¸‹å…§å®¹å®Œå…¨ä¸å‹• ===== -->

  <!-- ğŸ“Š åœ–è¡¨å®¹å™¨ï¼ˆåŸæ¨£ï¼‰ -->
  <div style="max-width: 1200px; margin: 20px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
    <canvas id="winRateChart"></canvas>
    <p style="margin-top: 10px; font-size: 14px; color: #555;">æ­¤åœ–é¡¯ç¤ºæœ€è¿‘äº”ç­† win_rate çš„è®ŠåŒ–è¶¨å‹¢ã€‚</p>
  </div>

  <script>
    const winRateLabels = {{ win_rate_data | map(attribute='created_at') | list | tojson }};
    const winRateValues = {{ win_rate_data | map(attribute='win_rate') | list | tojson }};

    const ctx = document.getElementById('winRateChart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: winRateLabels,
        datasets: [{
          label: 'Win Rate',
          data: winRateValues,
          borderColor: '#043b8f',
          backgroundColor: 'rgba(4,59,143,0.10)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        scales: {
          y: { title: { display: true, text: 'Win Rate' }, min: 0, max: 100 },
          x: { title: { display: true, text: 'äº¤æ˜“æ™‚é–“' } }
        },
        plugins: { legend: { display: true, labels: { color: '#043b8f' } } }
      }
    });
  </script>

  {% if logs %}
    <table>
      <thead>
        <tr>
          <th>ä½¿ç”¨è€… ID</th>
          <th>è‚¡ç¥¨ä»£ç¢¼</th>
          <th>æ¨¡æ“¬èµ·å§‹æ—¥</th>
          <th>AI åˆ†æå…§å®¹</th>
          <th>å»ºç«‹æ™‚é–“</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
          <tr>
            <td>{{ log.user_id }}</td>
            <td>{{ log.stock_code }}</td>
            <td>{{ log.simulation_start_date }}</td>
            <td style="text-align: left;">{{ log.content | replace('\n', '<br>') | safe }}</td>
            <td>{{ log.created_at }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="text-align:center; margin-top:40px; color:#ffffff;">ç›®å‰å°šç„¡æœ‰æ•ˆç´€éŒ„ã€‚</p>
  {% endif %}

</body>
</html>
