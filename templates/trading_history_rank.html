<!-- templates/rank.html -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>交易排行榜</title>

  <!-- 思源宋體 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
  <!-- Bootstrap 4.5 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.3/css/bootstrap.min.css">

  <style>
    :root{
      --primary:#043b8f;
      --primary-dark:#02347e;
      --primary-light:#6499e9;
      --secondary:#0b1f33;
    }
    html,body{height:100%;margin:0;}
    body{
      display:flex;flex-direction:column;
      font-family:'Noto Serif TC',serif;
      line-height:1.6;
    }
    h1{font-size:2rem;margin:1.5rem 0 2rem;text-align:center;font-weight:700;}

    /* 背景動畫 */
    body::before{
      content:"";position:fixed;inset:0;
      background:url("https://png.pngtree.com/thumb_back/fh260/background/20231227/pngtree-gentle-blue-background-with-a-soft-textured-finish-image_13898387.png") center/cover no-repeat;
      filter:grayscale(20%) brightness(0.55);
      z-index:-2;animation:bgZoom 40s ease-in-out infinite alternate;
    }
    @keyframes bgZoom{from{transform:scale(1);}to{transform:scale(1.15);}}

    /* 卡片包裝（半透明不全白） */
    .card-wrapper{
      background:rgba(255,255,255,0.3);
      backdrop-filter: blur(6px);
      border-radius:.8rem;
      box-shadow:0 10px 30px rgba(0,0,0,.05);
      padding:2rem 1.2rem 4rem;
      max-width: 960px;   /* 限制最大寬度 */
      margin: 60px auto 60px;     
    }

    /* Home 按鈕 */
    .btn-home{
      display:inline-block;text-decoration:none;font-weight:700;
      padding:.6rem 1.25rem;border-radius:999px;
      border:1.5px solid var(--primary);background:#fff;color:var(--primary);
      transition:background .2s ease,color .2s ease,box-shadow .2s ease,transform .05s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn-home:hover{background:var(--primary);color:#fff;box-shadow:0 8px 16px rgba(4,59,143,.18);transform:translateY(-1px);}
    .btn-home:active{transform:translateY(0);box-shadow:0 4px 8px rgba(4,59,143,.18);}
    .btn-home,.btn-home:focus,.btn-home:active,.btn-home:focus-visible{outline:none!important;box-shadow:none!important;border-color:var(--primary)!important;}

    /* 表格細節 */
    .table {
    width: 90%;          /* 表格總寬度為容器的 90% */
    margin: 0 auto;      /* 水平置中 */
    table-layout: fixed; /* 固定欄位寬度 */
    }

    .table th, .table td {
    padding: 14px 20px;  /* 增加內距，讓內容更寬鬆 */
    text-align: center;
    }
    
    .table thead th{
      background: var(--primary);
      color:#fff;
      border-color: rgba(255,255,255,.25);
    }
    .table tbody tr{
      background:#fff;
    }
    .table tbody tr:hover{
      background:#f6f9ff;
    }
    .badge-rank{
      font-size:.85rem;
      background:linear-gradient(145deg, #f4f6ff, #eaf0ff);
      border:1px solid #e1e8ff;
      color:#274690;
      padding:.35rem .6rem;
      border-radius:.5rem;
    }

    .table th:nth-child(1),
    .table td:nth-child(1) { width: 15%; }  /* 名次 */
    .table th:nth-child(2),
    .table td:nth-child(2) { width: 35%; }  /* 使用者名稱 */
    .table th:nth-child(3),
    .table td:nth-child(3) { width: 25%; }  /* 平均勝率 */
    .table th:nth-child(4),
    .table td:nth-child(4) { width: 25%; }  /* 總獲利 */
    
  </style>
</head>
<body>
  <main class="flex-grow-1">
    <div class="container-fluid mt-5 mb-5 card-wrapper">
      <div class="mb-3 d-flex justify-content-between align-items-center">
        <a href="{{ url_for('main') }}" class="btn-home">Home</a>
      </div>

      <h1>RANK</h1>

      <div class="table-responsive">
        <table class="table table-hover table-striped table-bordered mb-0">
          <thead>
            <tr>
              <th scope="col">名次</th>
              <th scope="col">使用者名稱</th>
              <th scope="col">平均勝率</th>
              <th scope="col">總獲利</th>
            </tr>
          </thead>
          <tbody>
            {% for row in ranks %}
            <tr>
              <td><span class="badge-rank">{{ loop.index }}</span></td>
              <td>{{ row.username }}</td>
              <td>{{ row.avg_win_rate }}</td>
              <td>{{ row.total_profit }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </main>

  
  <!-- jQuery & Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
